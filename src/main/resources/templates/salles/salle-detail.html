<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <title>Détail de la Salle</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    </head>
    <body class="container mt-4">
        <!-- Inclusion du menu -->
        <div th:replace="nav/menu :: navbar"></div>

        <h2>Détails de la salle : [[${salle.nom}]]</h2>
        <p>Capacité : [[${salle.capacite}]] place(s)</p>

        <h4>Équipements disponibles</h4>
        <table class="table table-striped mt-3">
            <thead>
            <tr>
                <th>ID</th>
                <th>Nom</th>
                <th>Date début</th>
                <th>Date fin</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
                <tr th:each="se : ${salle.salleEquipements}">
                    <td th:text="${se.equipement.id}"></td>
                    <td th:text="${se.equipement.nom}"></td>
                    <td th:text="${#temporals.format(se.dateDebut, 'dd/MM/yyyy HH:mm')}"></td>
                    <td th:text="${#temporals.format(se.dateFin, 'dd/MM/yyyy HH:mm')}"></td>
                    <td class="d-flex gap-2 align-items-center">
                        <a th:href="@{'/salles/form/' + ${salle.id}}" class="btn btn-warning btn-sm">Modifier</a>
                        <a th:href="@{'/salle-equipements/delete/' + ${se.id}}" class="btn btn-danger btn-sm">Retirer</a>
                    </td>
                </tr>
            </tbody>
        </table>

        <h3>Ajouter un équipement</h3>
        <!--/*@thymesVar id="salleEquipement" type="sn.estm.examen.entites.SalleEquipement"*/-->
        <form th:action="@{'/salle-equipements/save'}" method="post" class="mt-3"
              th:object="${salleEquipement}">
            <div class="form-group">
                <input type="hidden" th:name="salle.id" th:value="${salle.id}" class="form-control" />
                <label>Nom de l'équipement :</label>
                <select th:name="'equipement.id'" class="form-select" required>
                    <option value="" disabled selected>-- Choisir un équipement --</option>
                    <option th:each="u : ${equipements}"
                            th:value="${u.id}"
                            th:text="${u.nom}">
                    </option>
                </select>
                <br>
                <label>Date début :</label>
                <input type="datetime-local" th:name="dateDebut" class="form-control" required/><br>

                <label>Date fin :</label>
                <input type="datetime-local" th:name="dateFin" class="form-control" required/><br>

            </div>
            <button type="submit" class="btn btn-primary">Ajouter</button>
            <a href="/salles" class="btn btn-secondary">Retour</a>
        </form>


    </body>
</html>
